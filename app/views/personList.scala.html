@**
* List persons.
*
* @author andreas
* @version 0.0.5, 2013-04-14
*@
@(persons: Seq[Person])(implicit flash: Flash, ctx: util.Ctx)
@import helper.deleteConfirmation
@import helper.lastModificationIcon

@main(Messages("persons")) {
	<h1>@{if(persons.size == 1) Messages("person") else Messages("persons")}</h1>
	<table class="table table-striped table-hover">
	  @if(ctx.user.isDefined && ctx.userHasPrivilege(ctx.user.get, "create.person")) {
	  <caption>	    
	    <span class="pull-right">
	      <a href="/person/new" title="@Messages("person.add")"><i class="glyphicon glyphicon-plus-sign"></i></a> ...
	    </span>	
	  </caption>
	  }
	  <thead>
	    <tr>
	      <th>@Messages("person.lastname")</th>
	      <th>@Messages("person.firstname")</th>
	      <th>@Messages("person.nickname")</th>
	      <th>@Messages("actions")</th>
	    </tr>
	  </thead>
	  <tbody>
	  @persons.map { p =>
	    <tr>
	      <td>@p.lastname</td>
	      <td>@p.firstname.getOrElse("")</td>
  	      <td>@p.nickname.getOrElse("")</td>
          <td> 
            <a href="/person/@p.id.get" title="@Messages("person.view")"><i class="glyphicon glyphicon-eye-open"></i></a>
          @if(ctx.user.isDefined) {
            <a href="/person/edit/@p.id.get" title="@Messages("person.edit")"><i class="glyphicon glyphicon-pencil"></i></a>
            <a href="#" data-toggle="modal" title="@Messages("person.delete")" data-target="#delConfirm" onclick="delId = @p.id.get"><i class="glyphicon glyphicon-trash"></i></a>
          }
          @lastModificationIcon(p)
          </td>
        </tr>
	  }
	  </tbody>
	</table>

@deleteConfirmation("person")
}